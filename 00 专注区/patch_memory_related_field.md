---
title: MEMORY.md 补丁：related 交叉引用字段
type: patch-instruction
target: MEMORY.md
version: v2.3.0 → v2.4.1
created: 2026-02-19
---

# 补丁：为 MEMORY.md 增补 `related` 交叉引用字段

## 背景

v2.3.0 引入了 `related` 字段，用于在动态记忆（Layer 2）和程序性记忆（Layer 3）之间建立交叉引用。如果你的 MEMORY.md 是从 v2.3.0 之前的版本创建的，条目格式中可能缺少这个字段。

## 执行步骤

### 第一步：修改动态记忆的条目格式模板

找到 `## 动态记忆（Layer 2）` 下的 `### 条目格式` 代码块，替换为：

```markdown
### [简短标题]
- **强度**：★★
- **发现日期**：YYYY-MM-DD
- **证据**：[具体行为或对话记录的简述]
- **related**：[关联的程序性记忆条目，如有]
- **备注**：[补充说明，如适用场景、例外情况]
```

在代码块下方追加说明：

```markdown
> `related` 字段用于建立动态记忆与程序性记忆之间的交叉引用。一个洞见可能关联多个行动模式，反之亦然。
```

### 第二步：修改程序性记忆的条目格式模板

找到 `## 程序性记忆（Layer 3）` 下的 `### 条目格式` 代码块，替换为：

```markdown
### [模式名称]
- **强度**：★★
- **触发情境**：[什么条件下触发]
- **行动模式**：[AI 应该怎么做]
- **发现日期**：YYYY-MM-DD
- **related**：[关联的动态记忆条目，如有]
- **证据**：[发现这个模式的具体场景]
```

### 第三步：为已有条目补充字段

对 MEMORY.md 中所有已有的动态记忆和程序性记忆条目，逐条追加一行：

```markdown
- **related**：—
```

插入位置：
- 动态记忆条目：`证据` 之后、`备注` 之前
- 程序性记忆条目：`发现日期` 之后、`证据` 之前

`—` 表示暂无关联。后续复盘时逐步填充实际关联。

### 第四步：验证

完成后检查：
1. 动态记忆和程序性记忆的格式模板中都包含 `related` 字段
2. 所有已有条目都已补充 `related` 行
3. 格式模板下方有 `related` 字段的用途说明

## related 字段的写法

| 写法 | 含义 |
|------|------|
| `—` | 暂无关联 |
| `→ 程序性「文件命名习惯」` | 指向一个程序性记忆条目 |
| `→ 动态「决策偏好：先做再想」` | 指向一个动态记忆条目 |
| `→ 程序性「A」；→ 程序性「B」` | 指向多个条目，分号隔开 |
| `→ 程序性「A」（同一风格的行动表现）` | 括号内写关联说明 |

## 示例

补丁前：
```markdown
### 决策偏好：先做再想
- **强度**：★★
- **发现日期**：2026-02-20
- **证据**：两次面对新项目时选择先出原型再讨论方向
- **备注**：高不确定性场景尤为明显
```

补丁后：
```markdown
### 决策偏好：先做再想
- **强度**：★★
- **发现日期**：2026-02-20
- **证据**：两次面对新项目时选择先出原型再讨论方向
- **related**：→ 程序性「阻塞处理偏好」（同一决策风格的不同表现）
- **备注**：高不确定性场景尤为明显
```
